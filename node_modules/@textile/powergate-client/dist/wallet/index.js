"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createWallet = void 0;
const rpc_pb_1 = require("@textile/grpc-powergate-client/dist/wallet/rpc/rpc_pb");
const rpc_pb_service_1 = require("@textile/grpc-powergate-client/dist/wallet/rpc/rpc_pb_service");
const util_1 = require("../util");
/**
 * @ignore
 */
exports.createWallet = (config) => {
    const client = new rpc_pb_service_1.RPCServiceClient(config.host, config);
    return {
        newAddress: (type = "bls") => {
            const req = new rpc_pb_1.NewAddressRequest();
            req.setType(type);
            return util_1.promise((cb) => client.newAddress(req, cb), (resp) => resp.toObject());
        },
        list: () => util_1.promise((cb) => client.list(new rpc_pb_1.ListRequest(), cb), (resp) => resp.toObject()),
        balance: (address) => {
            const req = new rpc_pb_1.BalanceRequest();
            req.setAddress(address);
            return util_1.promise((cb) => client.balance(req, cb), (resp) => resp.toObject());
        },
        sendFil: (from, to, amount) => {
            const req = new rpc_pb_1.SendFilRequest();
            req.setFrom(from);
            req.setTo(to);
            req.setAmount(amount);
            return util_1.promise((cb) => client.sendFil(req, cb), () => {
                // nothing to return
            });
        },
    };
};
//# sourceMappingURL=index.js.map